
function unshiftright(a, b)
{
    var na = a;
    var nb = b;
    if((nb >= 32) || (nb < -32))
    {
        m = (nb / 32);
        nb = nb - (m * 32);
    }
    if(nb < 0)
    {
        nb = 32 + nb;
    }
    if (nb == 0)
    {
        return ((na >> 1) & 0x7fffffff) * 2 + ((na >> nb) & 1);
    }
    if (na < 0) 
    { 
        na = (na >> 1); 
        na = na & 0x7fffffff; 
        na = na | 0x40000000; 
        na = (na >> (nb - 1)); 
    }
    else
    {
        na = (na >> nb); 
    }
    return na; 
}

const expectedtbl = [
[1138166239, 25, 33],
[-991732713, 20, 3150],
[-1128986238, 15, 96618],
[-1931635233, 10, 2307941],
[-790150573, 25, 104],
[-2076664215, 20, 2115],
[-666461924, 15, 110733],
[650717114, 10, 635465],
[77903233, 25, 2],
[-269991522, 20, 3838],
[-157186952, 15, 126275],
[-665750834, 10, 3544156],
[300894583, 25, 8],
[1811654850, 20, 1727],
[-2054624080, 15, 68369],
[1958115190, 10, 1912221],
[-233076003, 27, 30],
[-1109695160, 23, 379],
[-136541658, 18, 15863],
[-545092357, 12, 915496],
[-1286903277, 27, 22],
[-753281248, 23, 422],
[-1198649689, 18, 11811],
[-878557330, 12, 834084],
[-1305281725, 27, 22],
[-1133270445, 23, 376],
[1645991431, 18, 6278],
[-375318643, 12, 956945],
[-2132065248, 27, 16],
[1001605273, 23, 119],
[944044676, 18, 3601],
[-19261363, 12, 1043873],
[-768051024, 28, 13],
[-1458971225, 21, 1352],
[-695491469, 16, 54923],
[11176070, 9, 21828],
[-999481605, 28, 12],
[-826301748, 21, 1653],
[-1485520773, 16, 42868],
[-1231195030, 9, 5983930],
[1514044007, 28, 5],
[-1366979945, 21, 1396],
[-1217783561, 16, 46954],
[57277060, 9, 111869],
[-201577912, 28, 15],
[-1005346726, 21, 1568],
[856394603, 16, 13067],
[-2109379825, 9, 4268725],
[131841728, 26, 1],
[819435896, 22, 195],
[-404569836, 17, 29681],
[1666046852, 11, 813499],
[-1508825274, 26, 41],
[1039519521, 22, 247],
[-1147289192, 17, 24014],
[1511420319, 11, 737998],
[-1013466195, 26, 48],
[122897919, 22, 29],
[-1440410536, 17, 21778],
[-742213086, 11, 1734743],
[-1921619566, 26, 35],
[263185897, 22, 62],
[-1539117921, 17, 21025],
[-799292309, 11, 1706872],
]
for(itm in expectedtbl)
{
    var a = itm[0]
    var b = itm[1]
    var exres = itm[2]
    var res = unshiftright(a, b)
    if(res == exres)
    {
        print("OK   ")
    }
    else
    {
        print("FAIL ")
    }
    println(`unshiftright(${a}, ${b}) = ${res} (expect: ${exres})`)
}
